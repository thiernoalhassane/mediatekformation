name: ðŸš€ DÃ©ploiement Symfony sur O2switch

on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
    - name: ðŸ“‚ VÃ©rifier le dÃ©pÃ´t
      uses: actions/checkout@v4

    - name: ðŸ”‘ Charger la clÃ© SSH depuis les secrets GitHub
      run: |
        echo "${{ secrets.O2SWITCH_SSH_KEY }}" > private_key
        chmod 600 private_key

    - name: ðŸš€ DÃ©ploiement sur O2switch
      uses: appleboy/ssh-action@v0.1.10
      with:
        host: "epinoche.o2switch.net"  # Remplace par ton domaine O2switch
        username: "gehu1211"  # Ton identifiant SSH
        key: ${{ secrets.O2SWITCH_SSH_KEY }}
        port: 22
        script: |
          echo "âœ… Connexion SSH rÃ©ussie !"
          ls -la ~/www/mediatekformation  # VÃ©rifier que le chemin est correct
          bash ~/www/mediatekformation/deploy.sh
